<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ice Cream Fun</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Narrow', Arial, sans-serif;
            overflow-x: hidden;
            background-color: white;
        }

        .container {
            position: relative;
            width: 100%;
            min-height: 100vh;
            background-color: white;
            overflow: hidden;
            transform: scale(0.95) translate(-2.5%, 1%);
            transform-origin: center center;
        }

        /* PDF Background Layer */
        .pdf-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: 1;
        }

        .pdf-background embed {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Background star pattern */
        .star-background {
            position: absolute;
            left: -527.42px;
            top: -645.18px;
            width: 2295.777px;
            height: 2057.318px;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: 0;
        }

        .star-background-inner {
            transform: rotate(15.778deg);
        }

        .star-pattern {
            position: relative;
            width: 1936.171px;
            height: 1590.781px;
        }

        .star-pattern img {
            position: absolute;
            bottom: 1.45%;
            left: 0.36%;
            right: 0.36%;
            top: 0;
            width: 99.28%;
            height: 98.55%;
            max-width: none;
        }

        /* Ice cream elements */
        .ice-cream-item {
            position: absolute;
            overflow: hidden;
            pointer-events: auto;
            cursor: grab;
            z-index: 10;
            will-change: transform;
        }

        .ice-cream-item.dragging {
            cursor: grabbing;
            z-index: 1000;
            opacity: 0.9;
        }

        .ice-cream-item img {
            position: absolute;
            max-width: none;
            display: block;
            pointer-events: none;
        }

        /* Cone */
        .cone {
            left: 547px;
            top: 518px;
            width: 163px;
            height: 310px;
        }

        .cone img {
            left: -53.68%;
            top: -7.42%;
            width: 211.04%;
            height: 110.97%;
        }

        /* Short cone */
        .shortcone {
            left: 388px;
            top: 429px;
            width: 186px;
            height: 246px;
        }

        .shortcone img {
            left: -39.78%;
            top: -23.58%;
            width: 184.41%;
            height: 139.43%;
        }

        /* Cream */
        .cream {
            left: 487px;
            top: 232px;
            width: 213px;
            height: 189px;
        }

        .cream img {
            left: -33.98%;
            top: -44.23%;
            width: 166.99%;
            height: 189.01%;
        }

        /* Mint */
        .mint {
            left: 263px;
            top: 60px;
            width: 224px;
            height: 202px;
        }

        .mint img {
            left: -17.57%;
            top: -23.93%;
            width: 132.82%;
            height: 147.01%;
        }

        /* Pink */
        .pink {
            left: 194px;
            top: 378px;
            width: 215px;
            height: 217px;
        }

        .pink img {
            left: -10.22%;
            top: -11.59%;
            width: 125.55%;
            height: 124.64%;
        }

        /* Blue */
        .blue {
            left: 669px;
            top: 549px;
            width: 218px;
            height: 202px;
        }

        .blue img {
            left: -13.6%;
            top: -18.25%;
            width: 126.47%;
            height: 136.51%;
        }

        /* Rainbow */
        .rainbow {
            left: 778px;
            top: 290px;
            width: 251px;
            height: 238px;
        }

        .rainbow img {
            left: -21.67%;
            top: -24.56%;
            width: 142.5%;
            height: 150%;
        }

        /* Girl */
        .girl {
            left: 923px;
            top: 301px;
            width: 631px;
            height: 720px;
            cursor: default !important;
            pointer-events: none;
        }

        .girl img {
            left: -17.91%;
            top: -10.83%;
            width: 138.51%;
            height: 121.39%;
        }

        /* Cherry */
        .cherry {
            left: 715px;
            top: 86px;
            width: 245px;
            height: 228px;
        }

        .cherry img {
            left: -5.42%;
            top: -10.91%;
            width: 116.61%;
            height: 125.09%;
        }

        /* Pink candy */
        .pinkcandy {
            left: 568px;
            top: 77px;
            width: 138px;
            height: 84px;
        }

        .pinkcandy img {
            left: -12.32%;
            top: -50.6%;
            width: 124.64%;
            height: 204.76%;
        }

        /* Blue candy */
        .bluecandy {
            left: 636px;
            top: -11px;
            width: 151px;
            height: 84px;
        }

        .bluecandy img {
            left: -6.62%;
            top: -47.62%;
            width: 113.25%;
            height: 203.57%;
        }

        /* Green candy */
        .greencandy-wrapper {
            position: absolute;
            left: 121px;
            top: 144px;
            width: 157.077px;
            height: 114.269px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            z-index: 10;
            will-change: transform;
        }

        .greencandy-wrapper.dragging {
            cursor: grabbing;
            z-index: 1000;
            opacity: 0.9;
        }

        .greencandy-inner {
            transform: rotate(344.75deg);
        }

        .greencandy {
            position: relative;
            width: 141px;
            height: 80px;
        }

        .greencandy img {
            position: absolute;
            left: -10.99%;
            top: -55%;
            width: 121.99%;
            height: 215%;
            max-width: none;
            pointer-events: none;
        }

        /* Worms */
        .whiteworm {
            left: 411px;
            top: 234px;
            width: 98px;
            height: 121px;
        }

        .whiteworm img {
            left: -33.67%;
            top: -21.49%;
            width: 175.51%;
            height: 142.15%;
        }

        .yellowworm {
            left: 330px;
            top: 301px;
            width: 89px;
            height: 131px;
        }

        .yellowworm img {
            left: -49.44%;
            top: -13.74%;
            width: 193.26%;
            height: 131.3%;
        }

        .blueworm {
            left: 652px;
            top: 414px;
            width: 126px;
            height: 77px;
        }

        .blueworm img {
            left: -17.86%;
            top: -62.34%;
            width: 136.51%;
            height: 223.38%;
        }

        .greeworm {
            left: 158px;
            top: 334px;
            width: 93px;
            height: 131px;
        }

        .greeworm img {
            left: -37.1%;
            top: -12.98%;
            width: 184.95%;
            height: 131.3%;
        }

        .pinkworm {
            left: 587px;
            top: 166px;
            width: 147px;
            height: 68px;
        }

        .pinkworm img {
            left: -8.84%;
            top: -77.94%;
            width: 117.01%;
            height: 252.94%;
        }

        /* Gummy bear */
        .gummybear {
            left: 964px;
            top: 226px;
            width: 131px;
            height: 100px;
        }

        .gummybear img {
            left: -14.5%;
            top: -38.5%;
            width: 131.3%;
            height: 172%;
        }

        /* Plastic eyes */
        .pasticeye {
            left: 472px;
            top: 149px;
            width: 106px;
            height: 64px;
        }

        .pasticeye img {
            left: -11.32%;
            top: -51.56%;
            width: 119.81%;
            height: 198.44%;
        }

        .plasticeye2 {
            left: 685px;
            top: 301px;
            width: 137px;
            height: 71px;
        }

        .plasticeye2 img {
            left: -8.64%;
            top: -63.08%;
            width: 117.78%;
            height: 227.15%;
        }

        /* Yellow candy */
        .yellowcandy {
            position: absolute;
            left: 833px;
            top: 486px;
            width: 181px;
            height: 181px;
            cursor: grab;
            z-index: 10;
            will-change: transform;
        }

        .yellowcandy.dragging {
            cursor: grabbing;
            z-index: 1000;
            opacity: 0.9;
        }

        .yellowcandy img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: 50% 50%;
            max-width: none;
            pointer-events: none;
        }

        /* Button */
        .button-container {
            position: absolute;
            left: 481px;
            top: 872px;
        }

        .button-back {
            position: absolute;
            left: 0;
            top: 0;
            width: 278px;
            height: 62px;
            background-color: #5eff00;
            border: 2px solid black;
        }

        .button-front {
            position: absolute;
            left: 7px;
            top: 6px;
            width: 265px;
            height: 50px;
            background-color: #5eff00;
            border: 2px solid black;
            cursor: pointer;
            transition: all 0.1s ease;
        }

        .button-front:hover {
            transform: translate(2px, 2px);
        }

        .button-front:active {
            transform: translate(7px, 6px);
        }

        .button-text {
            position: absolute;
            left: 15px;
            top: 17px;
            font-size: 24px;
            color: black;
            font-weight: normal;
            pointer-events: none;
            white-space: nowrap;
        }

        /* WELL DONE Button */
        .welldone-container {
            position: absolute;
            left: 481px;
            top: 680px;
        }

        .welldone-button {
            width: 278px;
            height: 62px;
            background-color: #5eff00;
            border: 2px solid black;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.1s ease;
        }

        .welldone-button:hover {
            transform: scale(1.05);
        }

        .welldone-button:active {
            transform: scale(0.98);
        }

        .welldone-text {
            font-family: 'Arial Narrow', Arial, sans-serif;
            font-size: 28px;
            color: black;
            font-weight: bold;
            pointer-events: none;
        }

        /* RESET Button */
        .reset-button {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: white;
            border: 2px solid black;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.1s ease;
            z-index: 1000;
        }

        .reset-button:hover {
            transform: scale(1.05);
        }

        .reset-button:active {
            transform: scale(0.95);
        }

        .reset-text {
            font-family: 'Arial Narrow', Arial, sans-serif;
            font-size: 18px;
            color: black;
            font-weight: bold;
            pointer-events: none;
        }

        /* Assembled group */
        .assembled-group {
            position: absolute;
            pointer-events: auto;
            cursor: grab;
        }

        .assembled-group.dragging {
            cursor: grabbing;
            z-index: 1000;
            opacity: 0.9;
        }

        /* Responsive adjustments */
        @media (max-width: 1400px) {
            .container {
                transform: scale(0.8) translate(-2.5%, 1%);
                transform-origin: center center;
            }
        }

        @media (max-width: 1100px) {
            .container {
                transform: scale(0.7) translate(-2.5%, 1%);
                transform-origin: center center;
            }
        }

        @media (max-width: 800px) {
            .container {
                transform: scale(0.6) translate(-2.5%, 1%);
                transform-origin: center center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Background star pattern -->
        <div class="star-background">
            <div class="star-background-inner">
                <div class="star-pattern">
                    <img src="https://www.figma.com/api/mcp/asset/9f9a2254-3aad-48c5-8185-0acd25c11d4c" alt="">
                </div>
            </div>
        </div>

        <!-- PDF Background Layer -->
        <div class="pdf-background">
            <embed src="star1.pdf" type="application/pdf">
        </div>

        <!-- Cone -->
        <div class="ice-cream-item cone" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/d2a5d4f9-cf1f-484a-b56d-d343cbfda742" alt="">
        </div>

        <!-- Short cone -->
        <div class="ice-cream-item shortcone" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/ea71efd7-df21-4884-ad6b-eec70a3220a5" alt="">
        </div>

        <!-- Cream -->
        <div class="ice-cream-item cream" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/18e52d65-cede-439a-8e2f-0964f3326b15" alt="">
        </div>

        <!-- Mint ice cream -->
        <div class="ice-cream-item mint" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/2c83409d-6e2c-4f43-a9a9-9e3240c793f4" alt="">
        </div>

        <!-- Pink ice cream -->
        <div class="ice-cream-item pink" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/f08b959e-f54b-44d2-8fb7-1f9f61399119" alt="">
        </div>

        <!-- Blue ice cream -->
        <div class="ice-cream-item blue" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/fa381d1e-5be2-40b6-ac96-90577f4fa1e1" alt="">
        </div>

        <!-- Rainbow ice cream -->
        <div class="ice-cream-item rainbow" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/f08907b1-1b4f-4799-aa5e-2c9f9205712a" alt="">
        </div>

        <!-- Girl with mouth open -->
        <div class="ice-cream-item girl">
            <img src="https://www.figma.com/api/mcp/asset/10b41dcb-c743-438b-8e3e-6c7021dc42d3" alt="">
        </div>

        <!-- Cherry -->
        <div class="ice-cream-item cherry" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/136e3d47-3e2c-475c-b35d-e22d30875f5b" alt="">
        </div>

        <!-- Pink candy -->
        <div class="ice-cream-item pinkcandy" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/3282fa67-5d3b-4154-bf38-fc939ccc903f" alt="">
        </div>

        <!-- Blue candy -->
        <div class="ice-cream-item bluecandy" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/8a01e6ad-4851-4e85-b9c1-4c5b3f22ae13" alt="">
        </div>

        <!-- Green candy (rotated) -->
        <div class="greencandy-wrapper" data-draggable="true">
            <div class="greencandy-inner">
                <div class="greencandy">
                    <img src="https://www.figma.com/api/mcp/asset/eacf0c93-1272-427b-aa82-e5795ba1173d" alt="">
                </div>
            </div>
        </div>

        <!-- White worm -->
        <div class="ice-cream-item whiteworm" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/7021aba1-019f-4efb-a28c-aa48fd956fd5" alt="">
        </div>

        <!-- Yellow worm -->
        <div class="ice-cream-item yellowworm" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/23e4d419-4785-419f-a16b-bb7a4fe1db1f" alt="">
        </div>

        <!-- Blue worm -->
        <div class="ice-cream-item blueworm" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/5e497380-cc8d-4dce-9259-911cc095c9a4" alt="">
        </div>

        <!-- Green worm -->
        <div class="ice-cream-item greeworm" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/e82fa536-de78-4f46-9191-586d5aabde1f" alt="">
        </div>

        <!-- Pink worm -->
        <div class="ice-cream-item pinkworm" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/2398c064-e1da-43b0-b068-70e6713bffa6" alt="">
        </div>

        <!-- Gummy bear -->
        <div class="ice-cream-item gummybear" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/c65e916d-f96e-4584-8ddb-49aeb08a42a2" alt="">
        </div>

        <!-- Plastic eye 1 -->
        <div class="ice-cream-item pasticeye" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/7ff2326a-a80b-465d-9c30-9fd5c1021ab5" alt="">
        </div>

        <!-- Yellow candy -->
        <div class="yellowcandy" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/57d99494-2aad-4fcd-a842-513de5084f21" alt="">
        </div>

        <!-- Plastic eye 2 -->
        <div class="ice-cream-item plasticeye2" data-draggable="true">
            <img src="https://www.figma.com/api/mcp/asset/0e9ff3cc-64f9-49c4-84e2-5d167149107c" alt="">
        </div>

        <!-- Button -->
        <div class="button-container">
            <div class="button-back"></div>
            <div class="button-front" id="feedButton">
                <span class="button-text">OMG JUST FEED HER PLZ</span>
            </div>
        </div>

        <!-- WELL DONE Button -->
        <div class="welldone-container">
            <div class="welldone-button" id="wellDoneButton">
                <span class="welldone-text">OMG JS FEED HER PLZ</span>
            </div>
        </div>

        <!-- RESET Button -->
        <div class="reset-button" id="resetButton">
            <span class="reset-text">RESET</span>
        </div>

        <!-- Audio element for eating sound -->
        <audio id="eatingSound" preload="auto">
            <source src="zombies-eating-46440.mp3" type="audio/mpeg">
        </audio>
    </div>

    <script>
        // Smooth dragging functionality
        let draggedElement = null;
        let offsetX = 0;
        let offsetY = 0;
        let isDragging = false;

        // Get all draggable elements
        const draggableElements = document.querySelectorAll('[data-draggable="true"]');
        const girlElement = document.querySelector('.girl');
        const eatenItems = new Set();

        draggableElements.forEach(element => {
            element.addEventListener('mousedown', startDrag);
        });

        function startDrag(e) {
            if (eatenItems.has(this)) return;

            draggedElement = this;
            isDragging = true;

            const rect = draggedElement.getBoundingClientRect();
            const containerRect = document.querySelector('.container').getBoundingClientRect();

            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;

            draggedElement.classList.add('dragging');

            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);

            e.preventDefault();
        }

        function drag(e) {
            if (!isDragging || !draggedElement) return;

            const containerRect = document.querySelector('.container').getBoundingClientRect();
            const scale = 0.95; // Match the container scale

            let newX = (e.clientX - containerRect.left - offsetX) / scale;
            let newY = (e.clientY - containerRect.top - offsetY) / scale;

            // Use transform for smoother dragging
            draggedElement.style.left = newX + 'px';
            draggedElement.style.top = newY + 'px';

            // Check if item is in girl's mouth area
            checkIfEaten();
        }

        function stopDrag() {
            if (draggedElement) {
                draggedElement.classList.remove('dragging');
                // Final check when dropping
                checkIfEaten();
            }

            draggedElement = null;
            isDragging = false;

            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', stopDrag);
        }

        function checkIfEaten() {
            if (!draggedElement || !girlElement) return;

            const itemRect = draggedElement.getBoundingClientRect();
            const girlRect = girlElement.getBoundingClientRect();

            // Calculate center of dragged item
            const itemCenterX = itemRect.left + itemRect.width / 2;
            const itemCenterY = itemRect.top + itemRect.height / 2;

            // Define girl's mouth area (center region of the girl)
            const mouthLeft = girlRect.left + girlRect.width * 0.35;
            const mouthRight = girlRect.left + girlRect.width * 0.65;
            const mouthTop = girlRect.top + girlRect.height * 0.45;
            const mouthBottom = girlRect.top + girlRect.height * 0.75;

            // Check if item center is in mouth area
            if (itemCenterX >= mouthLeft && itemCenterX <= mouthRight &&
                itemCenterY >= mouthTop && itemCenterY <= mouthBottom) {
                eatItem(draggedElement);
            }
        }

        function eatItem(element) {
            if (eatenItems.has(element)) return;

            eatenItems.add(element);

            // Play eating sound
            const eatingSound = document.getElementById('eatingSound');
            if (eatingSound) {
                eatingSound.currentTime = 0; // Reset to start
                eatingSound.play().catch(err => {
                    console.log('Audio play failed:', err);
                });
            }

            // Animate disappearing
            element.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            element.style.opacity = '0';
            element.style.transform = 'scale(0.5)';

            // Remove from DOM after animation
            setTimeout(() => {
                if (element.parentNode) {
                    element.parentNode.removeChild(element);
                }
            }, 300);

            console.log('Yum! Item eaten! üç¶');
        }

        // Button click - simple fun message
        const feedButton = document.getElementById('feedButton');

        feedButton.addEventListener('click', function() {
            // Simple click effect - could add animation here
            console.log('Feed the girl!');
        });

        // WELL DONE Button - Assemble ice cream
        const wellDoneButton = document.getElementById('wellDoneButton');
        const assembledGroups = [];

        wellDoneButton.addEventListener('click', function() {
            assembleIceCream();
        });

        // RESET Button - Reload page to reset
        const resetButton = document.getElementById('resetButton');
        resetButton.addEventListener('click', function() {
            window.location.reload();
        });

        function assembleIceCream() {
            // Find all cone/shortcone elements
            const cones = Array.from(draggableElements).filter(el =>
                el.classList.contains('cone') || el.classList.contains('shortcone')
            );

            cones.forEach(cone => {
                if (eatenItems.has(cone)) return;

                const itemsOnTop = findItemsOnCone(cone);

                if (itemsOnTop.length > 0) {
                    createAssembledGroup(cone, itemsOnTop);
                }
            });
        }

        function findItemsOnCone(cone) {
            const coneRect = cone.getBoundingClientRect();
            const coneCenterX = coneRect.left + coneRect.width / 2;
            const coneTop = coneRect.top;
            const items = [];

            draggableElements.forEach(element => {
                if (element === cone || eatenItems.has(element)) return;
                if (element.classList.contains('cone') || element.classList.contains('shortcone')) return;

                const elemRect = element.getBoundingClientRect();
                const elemCenterX = elemRect.left + elemRect.width / 2;
                const elemBottom = elemRect.bottom;

                // Check if element is above cone and horizontally aligned
                const horizontalDistance = Math.abs(elemCenterX - coneCenterX);
                const isAbove = elemBottom <= coneTop + 150; // Tolerance for stacking
                const isAligned = horizontalDistance < 100; // Horizontal tolerance

                if (isAbove && isAligned) {
                    items.push(element);
                }
            });

            return items;
        }

        function createAssembledGroup(cone, items) {
            const allItems = [cone, ...items];

            // Find bounding box of all items
            let minLeft = Infinity, minTop = Infinity;
            let maxRight = -Infinity, maxBottom = -Infinity;

            allItems.forEach(item => {
                const rect = item.getBoundingClientRect();
                const containerRect = document.querySelector('.container').getBoundingClientRect();

                const left = (rect.left - containerRect.left) / 0.95;
                const top = (rect.top - containerRect.top) / 0.95;
                const right = left + rect.width;
                const bottom = top + rect.height;

                minLeft = Math.min(minLeft, left);
                minTop = Math.min(minTop, top);
                maxRight = Math.max(maxRight, right);
                maxBottom = Math.max(maxBottom, bottom);
            });

            // Create group container
            const groupDiv = document.createElement('div');
            groupDiv.className = 'assembled-group';
            groupDiv.style.left = minLeft + 'px';
            groupDiv.style.top = minTop + 'px';
            groupDiv.style.width = (maxRight - minLeft) + 'px';
            groupDiv.style.height = (maxBottom - minTop) + 'px';
            groupDiv.style.zIndex = '10';

            // Move items into the group with relative positioning
            allItems.forEach(item => {
                const rect = item.getBoundingClientRect();
                const containerRect = document.querySelector('.container').getBoundingClientRect();

                const itemLeft = (rect.left - containerRect.left) / 0.95;
                const itemTop = (rect.top - containerRect.top) / 0.95;

                const relativeLeft = itemLeft - minLeft;
                const relativeTop = itemTop - minTop;

                item.style.position = 'absolute';
                item.style.left = relativeLeft + 'px';
                item.style.top = relativeTop + 'px';
                item.style.cursor = 'default';

                item.removeEventListener('mousedown', startDrag);
                eatenItems.add(item);

                groupDiv.appendChild(item);
            });

            // Add group to container
            document.querySelector('.container').appendChild(groupDiv);
            assembledGroups.push(groupDiv);

            // Make group draggable
            groupDiv.addEventListener('mousedown', startGroupDrag);

            console.log('Ice cream assembled! üç¶');
        }

        // Drag functionality for assembled groups
        let draggedGroup = null;
        let groupOffsetX = 0;
        let groupOffsetY = 0;
        let isGroupDragging = false;

        function startGroupDrag(e) {
            if (eatenItems.has(this)) return;

            draggedGroup = this;
            isGroupDragging = true;

            const rect = draggedGroup.getBoundingClientRect();
            const containerRect = document.querySelector('.container').getBoundingClientRect();

            groupOffsetX = e.clientX - rect.left;
            groupOffsetY = e.clientY - rect.top;

            draggedGroup.classList.add('dragging');

            document.addEventListener('mousemove', dragGroup);
            document.addEventListener('mouseup', stopGroupDrag);

            e.preventDefault();
            e.stopPropagation();
        }

        function dragGroup(e) {
            if (!isGroupDragging || !draggedGroup) return;

            const containerRect = document.querySelector('.container').getBoundingClientRect();
            const scale = 0.95;

            let newX = (e.clientX - containerRect.left - groupOffsetX) / scale;
            let newY = (e.clientY - containerRect.top - groupOffsetY) / scale;

            draggedGroup.style.left = newX + 'px';
            draggedGroup.style.top = newY + 'px';

            // Check if group is in girl's mouth area
            checkIfGroupEaten();
        }

        function stopGroupDrag() {
            if (draggedGroup) {
                draggedGroup.classList.remove('dragging');
                checkIfGroupEaten();
            }

            draggedGroup = null;
            isGroupDragging = false;

            document.removeEventListener('mousemove', dragGroup);
            document.removeEventListener('mouseup', stopGroupDrag);
        }

        function checkIfGroupEaten() {
            if (!draggedGroup || !girlElement) return;

            const groupRect = draggedGroup.getBoundingClientRect();
            const girlRect = girlElement.getBoundingClientRect();

            const groupCenterX = groupRect.left + groupRect.width / 2;
            const groupCenterY = groupRect.top + groupRect.height / 2;

            const mouthLeft = girlRect.left + girlRect.width * 0.35;
            const mouthRight = girlRect.left + girlRect.width * 0.65;
            const mouthTop = girlRect.top + girlRect.height * 0.45;
            const mouthBottom = girlRect.top + girlRect.height * 0.75;

            if (groupCenterX >= mouthLeft && groupCenterX <= mouthRight &&
                groupCenterY >= mouthTop && groupCenterY <= mouthBottom) {
                eatGroup(draggedGroup);
            }
        }

        function eatGroup(group) {
            if (eatenItems.has(group)) return;

            eatenItems.add(group);

            // Play eating sound
            const eatingSound = document.getElementById('eatingSound');
            if (eatingSound) {
                eatingSound.currentTime = 0;
                eatingSound.play().catch(err => {
                    console.log('Audio play failed:', err);
                });
            }

            // Animate disappearing
            group.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            group.style.opacity = '0';
            group.style.transform = 'scale(0.5)';

            setTimeout(() => {
                if (group.parentNode) {
                    group.parentNode.removeChild(group);
                }
            }, 300);

            console.log('Yum! Whole ice cream eaten! üç¶üç¶üç¶');
        }
    </script>
</body>
</html>
